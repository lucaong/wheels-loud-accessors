(function(e){function t(e){function i(){typeof this.initialize=="function"&&this.initialize.apply(this,arguments)}var n=function(e){var t=Array.prototype.slice.call(arguments,1);for(var n=0,r=t.length;n<r;n++)for(var i in t[n])e[i]=t[n][i];return e},r=function(e,t){typeof t=="function"?t.call(e,e.prototype):n(e.prototype,t)};return i.subclass=function(e){function s(){t.apply(this,arguments)}var t=this,i=new t;return s.__proto__?s.__proto__=t:n(s,t),n(s,{_superclass:t}),s.prototype=i,n(s.prototype,{constructor:s,_parent:t.prototype}),r(s,e),s},i.augment=function(){var e=Array.prototype.slice.apply(arguments);e.unshift(this),n.apply(this,e)},i.include=function(){this.augment.apply(this.prototype,arguments)},n(i,{constructor:t,_superclass:Function}),i.prototype._parent=Object,r(i,e),i}typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=t),exports.Class=t):typeof define=="function"&&define.amd?define("wheels-class",[],function(){return t}):(e.Wheels=e.Wheels||{},e.Wheels.Class=t)})(this),function(e,t){if(typeof exports!="undefined"){var n=require("wheels-class");exports=module.exports=exports.PubSub=t(n)}else typeof define=="function"&&define.amd?define("wheels-pubsub",["wheels-class"],function(e){return t(e)}):(e.Wheels=e.Wheels||{},e.Wheels.PubSub=t(e.Wheels.Class))}(this,function(e){var t=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(t===e[n])return n;return-1},n=new e({emit:function(e){var t;if(!this._eventListeners||!this._eventListeners[e])return!1;for(var n=0,r=this._eventListeners[e].length;n<r;n++)t=[e].concat(Array.prototype.slice.call(arguments,1)),this._eventListeners[e][n].apply(this,t);return!0},on:function(e,t){return this._eventListeners=this._eventListeners||{},this._eventListeners[e]||(this._eventListeners[e]=[]),this._eventListeners[e].push(t),this},once:function(e,t){var n=this;return n.on(e,function r(){n.off(e,r),t.apply(this,arguments)}),this},off:function(e,n){if(!this._eventListeners)return this;if(e)if(n){var r=t(this._eventListeners[e]||[],n);if(r<0)return this;this._eventListeners[e].splice(r,1)}else delete this._eventListeners[e];else this._eventListeners={};return this}});return n});